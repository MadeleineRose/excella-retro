<nav-bar board-name="board.title" user="user" socket-status="socketStatus" participants="participants" is-scrum-master="isScrumMaster"></nav-bar>
<alert type="info">{{boardPhaseDisplayName()}}</alert>
<alert type="warning" ng-if="socketStatus == 'reconnecting'">Lost connection to the server. Trying to reconnect.</alert>
<alert type="danger" ng-if="socketStatus == 'failed' || socketStatus == 'disconnected'">Lost connection to the server. Click on <a type="button" class="btn btn-sm" ng-click="refresh()"><span
        class="glyphicon glyphicon-refresh"></span></a> to re-connect </alert>

<div class="row-fluid">
    <div class="col-md-3 no-padding" id="boardTools" ng-if="isScrumMaster">
        <div class="panel panel-danger">
            <div class="panel-heading">
                <h3 class="panel-title">Scrum Master Tools</h3>
            </div>
            <div class="panel-body">
                <div class="row-fluid row-padding">
                    <span>Invite Participants</span>
                    <a class="btn btn-default glyphicon glyphicon-envelope" ng-href="{{participantMailToLink()}}"
                       title="Send email to participants"></a>
                    <a class="btn btn-default glyphicon glyphicon-link" target="_blank" ng-href="{{participantJoinLink()}}"
                       title="Copy link to send participants"></a>
                </div>
                <div class="row-fluid row-padding">
                    <span>Scrum Master</span>
                    <a style="left:23px" class="btn btn-warning glyphicon glyphicon-link" ng-href="{{scrumMasterAccessLink()}}"
                       title="Copy link to access as Scrum Master"></a>
                </div>
                <div class="row-fluid row-padding">
                    <span >End Retro</span>
                    <a style="left:47px" class="btn btn-danger glyphicon glyphicon-off"></a>
                </div>
                <div class="row-fluid" ng-if="board.phase == 'feedback-completed'">
                        <hr>
                        <add-theme board-id="board.id"></add-theme>
                    <hr>
                    <button type="button" class="btn btn-default" ng-click="startThemeVoting()">
                        Start
                        Theme Voting
                    </button>
                </div>
                <div class="row-fluid" ng-if="board.phase == 'voting-started'">
                        <hr>
                        <button type="button" class="btn btn-default" ng-click="stopThemeVoting()">
                            End Theme Voting
                        </button>
                </div>
                <div class="row-fluid" ng-if="board.phase == 'initial'">
                        <hr>
                        <button type="button" class="btn btn-default"
                                ng-click="startFeedbackGathering()">Start Feedback Gathering
                        </button>
                </div>
                <div class="row-fluid" ng-if="board.phase == 'feedback-started'">
                        <hr>
                        <button type="button" class="btn btn-default"
                                ng-click="stopFeedbackGathering()">Stop Feedback Gathering
                        </button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-9 no-padding" id="board">
        <add-feedback class="row-fluid" ng-if="board.phase == 'feedback-started'"
                      board-id="board.id"></add-feedback>
        <div class="row-fluid" ng-if="board.phase == 'feedback-completed' || board.phase.indexOf('voting') >= 0">
            <div class="col-md-6 no-padding">
                <view-feedback class="row-fluid" feedback="board.feedback"  feedback-context="Team"/>
            </div>
            <div class="col-md-6 no-padding">
                <view-themes class="row-fluid" board-id="board.id" themes="themes"></view-themes>
            </div>
        </div>
    </div>
</div>
